---
globs: "**/*.md"
description: Documentation standards and verification requirements
---

# Solo Documentation Standards

## Markdown Standards

### Heading Hierarchy

Use proper Markdown heading hierarchy (`#`, `##`, `###`) for clear document structure:

```markdown
# Main Title

## Section Title

### Subsection Title

#### Detail Title
```

### Line Length and Formatting

- **Line length**: Wrap lines around 100 characters for readability
- **Code blocks**: Use fenced code blocks with language hints
- **Links**: Use relative links (e.g., `../docs/FILE.md`)
- **Lists**: Use consistent bullet points and numbering

### Code Block Standards

```markdown
# Use language hints for syntax highlighting
```typescript
function processGameState(state: GameState): void {
  // Process game state
  updateSystems(state);
}
```

```bash
# Use bash for shell commands
npm test
npm run lint
npm run dev
```

```json
# Use json for configuration files
{
  "compilerOptions": {
    "strict": true,
    "target": "ES2020"
  }
}
```

## Documentation Structure

### Required Documentation Files (Simplified)

- **README.md**: Project overview and quick start
- **GAME_MODEL.md**: Domain model and game design (conceptual modules, entities, processes)
- **TECHNICAL_CONTRACTS.md**: Technical implementation details (SvelteKit, Prisma, architecture)
- **PR descriptions**: Detailed explanation of changes and rationale

### Documentation Organization (Simplified)

```
.
├── README.md                # Project overview and setup
├── GAME_MODEL.md            # Domain model and game design
├── TECHNICAL_CONTRACTS.md   # Technical implementation details
└── docs/                    # Additional documentation (when needed)
    └── proposals/           # Architecture proposals (when needed)
        └── major-changes.md
```

### Industry Documentation Standards (Solo-Optimized)

**Documentation Best Practices:**
- **Living Documentation**: Keep docs in sync with code
- **Type Documentation**: JSDoc comments for TypeScript functions
- **Architecture Decision Records**: Document architectural decisions
- **Game Design Documentation**: Document game mechanics and balance

**Industry Standards Integration:**
- **Type Documentation**: JSDoc comments for all public APIs
- **Security Documentation**: Document security considerations
- **Performance Documentation**: Document performance requirements (60 FPS target)
- **Architecture Documentation**: Document design decisions

## Content Standards for Solo Development

### README.md Requirements (Simplified)

```markdown
# Idle Game

## Quick Start

```bash
# Clone and setup
git clone <repository>
cd idlefinder

# Install dependencies
npm install

# Setup database
npx prisma migrate dev

# Start development server
npm run dev

# Build for production
npm run build
```

## Game Systems

- **Organizations**: Player's long-lived entity (guild, company, clan)
- **Agents**: Units assigned to tasks with stats and progression
- **Tasks**: Idle activities that resolve over time (missions, expeditions)
- **Facilities**: Organization-level upgrades that modify rules
- **Progress Tracks**: General progression system (prestige, tech, reputation)
- **Economy**: Resource management (gold, materials, etc.)

## Architecture

See [GAME_MODEL.md](GAME_MODEL.md) and [TECHNICAL_CONTRACTS.md](TECHNICAL_CONTRACTS.md) for system design.
```

### PR Description Standards

```markdown
## Feature: [Brief Description]

### Changes Made
- [List of key changes]
- [Architecture decisions]
- [Integration points]

### Rationale
- [Why these changes were made]
- [How they fit into existing patterns]
- [Expected outcomes]

### Testing
- [Basic functionality tested]
- [Integration points verified]
- [Manual testing completed]
```

### Workflow Documentation Standards

#### Workflow Pattern Documentation
```markdown
## Workflow Changes

### Cancellation Patterns
- [ ] Replaced `if: always()` with `if: ${{ !cancelled() }}`
- [ ] Added step-level timeouts to long-running operations
- [ ] Implemented emergency cleanup on cancellation
- [ ] Added resource cleanup with cancellation awareness

### Timeout Strategy
- [ ] Job-level timeouts: [X minutes]
- [ ] Step-level timeouts: [X minutes for specific steps]
- [ ] Emergency cleanup timeout: [1-2 minutes]

### Resource Management
- [ ] Emergency cleanup prevents resource waste
- [ ] Cancelled workflows stop consuming GitHub Actions minutes
- [ ] Docker cleanup runs on cancellation
```

#### Workflow Architecture Documentation
```markdown
## Workflow Architecture

### Multi-Tier Build Pipeline
```
Foundation → Tier 1 → Tier 2 → Tier 3 → Services → Smoke Tests
```

### Cancellation Flow
```
User Cancels → Emergency Cleanup → Resource Cleanup → Workflow Stops
```

### Timeout Hierarchy
- Foundation builds: 15-20 minutes
- Tier builds: 20-30 minutes  
- Service builds: 25-40 minutes
- Emergency cleanup: 1-2 minutes
```

### Industry Standards Documentation (Solo-Implemented)

**Enhanced PR Description Template:**
```markdown
## Feature: [Brief Description]

### Changes Made
- [List of key changes]
- [Architecture decisions]
- [Integration points]
- [Security considerations]
- [Performance implications]

### Industry Standards Compliance
- [ ] OWASP Top 10 addressed
- [ ] Performance requirements met
- [ ] Security scanning passed
- [ ] Code quality standards met

### Testing
- [Basic functionality tested]
- [Integration points verified]
- [Security testing completed]
- [Performance testing completed]
```

### Architecture Documentation

```markdown
## Idle Game Architecture

```
Client Request → SvelteKit Route → Application Service → Domain Systems → Repository → Database
```

### System Dependencies

- **Application Services** depend on: Repositories, Domain Systems
- **Domain Systems** depend on: Domain Entities, Value Objects (pure functions)
- **Repositories** depend on: Prisma Client
- **SvelteKit Routes** depend on: Application Services
- **Svelte Stores** depend on: Server responses
```

### Domain Model Documentation

```markdown
## Domain Model Structure

- **Entities**: Organization, AgentInstance, TaskInstance, FacilityInstance
- **Value Objects**: Identifier, Timestamp, Duration, ResourceBundle
- **Systems**: TaskResolutionSystem, EconomySystem, OfferSystem, ProgressionSystem
- **Repositories**: OrganizationRepository, TaskRepository, AgentRepository
```

## Documentation Verification (Simplified)

### Manual Verification Checklist

- [ ] README.md has proper setup instructions
- [ ] Architecture docs are current
- [ ] PR descriptions explain changes clearly
- [ ] Code blocks have language hints
- [ ] Links are relative and working

## Content Guidelines for Solo Development

### Writing Style

- **Clear and concise**: Avoid unnecessary jargon
- **Technical accuracy**: Verify all technical details
- **Up-to-date**: Keep documentation current with code changes
- **AI-focused**: Write for AI understanding and context

### Code Examples

```markdown
# Good: Complete, runnable examples
```typescript
import { Game } from './Game';
import { GameConfig } from './GameConfig';

const game = new Game(1920, 1080);
game.update(0.016); // Update at 60fps
const state = game.getState();
console.log('Wave:', state.wave, 'Serenity:', state.serenity);
```

# Bad: Incomplete examples
```typescript
game.update(dt);  // Missing imports and setup
```
```

### Link Standards

```markdown
# Use relative links for internal documentation
[Architecture Guide](docs/ARCHITECTURE.md)

# Use absolute links for external resources
[FastAPI Documentation](https://fastapi.tiangolo.com/)
[Docker Compose](https://docs.docker.com/compose/)
```

## Documentation Maintenance (Simplified)

### Update Requirements

When making code changes, update relevant documentation:

- **Domain model changes**: Update `GAME_MODEL.md`
- **Technical architecture changes**: Update `TECHNICAL_CONTRACTS.md`
- **New features**: Update `README.md` if needed
- **PR descriptions**: Always include detailed explanations

### Version Control

- **Commit messages**: Include documentation updates in commits
- **Pull requests**: Review documentation changes
- **PR descriptions**: Document rationale and changes

## Quality Gates (Simplified)

### Documentation Standards

- **Essential completeness**: Core functionality documented
- **Accuracy**: Documentation matches implementation
- **Clarity**: Clear and understandable content
- **AI context**: Documentation helps AI understand the system

### Verification Tools

- **Markdown linting**: Check markdown syntax
- **Link checking**: Verify all links work
- **Format validation**: Ensure consistent formatting